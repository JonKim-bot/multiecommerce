<footer>
        <div class="footer-wrapper gray-bg">
            <div class="footer-area footer-padding">
               <!--? Subscribe Area Start -->
               <section class="subscribe-area">
               
            </section>
            <!-- Subscribe Area End -->
            <div class="container">
                <div class="row justify-content-between">
                    <div class="col-xl-3 col-lg-3 col-md-6 col-sm-8">
                        <div class="single-footer-caption mb-50">
                            <div class="single-footer-caption mb-20">
                                <!-- logo -->
                                <div class="footer-logo mb-35">
                                    <a href="index.php"><img src="<?= base_url() ?>/assets/assetsecom/img/logo/logo2_footer.png" alt=""></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                        <div class="single-footer-caption mb-50">
                            <div class="footer-tittle">
                                <h4>Shop Men</h4>
                                <ul>
                                    <li><a href="#">Clothing Fashion</a></li>
                                    <li><a href="#">Winter</a></li>
                                    <li><a href="#">Summer</a></li>
                                    <li><a href="#">Formal</a></li>
                                    <li><a href="#">Casual</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                        <div class="single-footer-caption mb-50">
                            <div class="footer-tittle">
                                <h4>Shop Women</h4>
                                <ul>
                                    <li><a href="#">Clothing Fashion</a></li>
                                    <li><a href="#">Winter</a></li>
                                    <li><a href="#">Summer</a></li>
                                    <li><a href="#">Formal</a></li>
                                    <li><a href="#">Casual</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                        <div class="single-footer-caption mb-50">
                            <div class="footer-tittle">
                                <h4>Baby Collection</h4>
                                <ul>
                                    <li><a href="#">Clothing Fashion</a></li>
                                    <li><a href="#">Winter</a></li>
                                    <li><a href="#">Summer</a></li>
                                    <li><a href="#">Formal</a></li>
                                    <li><a href="#">Casual</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-2 col-lg-2 col-md-4 col-sm-6">
                        <div class="single-footer-caption mb-50">
                            <div class="footer-tittle">
                                <h4>Quick Links</h4>
                                <ul>
                                    <li><a href="#">Track Your Order</a></li>
                                    <li><a href="#">Support</a></li>
                                    <li><a href="#">FAQ</a></li>
                                    <li><a href="#">Carrier</a></li>
                                    <li><a href="#">About</a></li>
                                    <li><a href="#">Contact Us</a></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                </div>
            </div>
        </div>
        <!-- footer-bottom area -->
        <div class="footer-bottom-area">
            <div class="container">
                <div class="footer-border">
                    <div class="row">
                        <div class="col-xl-12 ">
                            <div class="footer-copy-right text-center">
                                <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved | This template is made with <i class="fa fa-heart color-danger" aria-hidden="true"></i> by <a href="https://colorlib.com" target="_blank" rel="nofollow noopener">Colorlib</a></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
<!-- Scroll Up -->
<div id="back-top" >
    <a class="wrapper" title="Go to Top" href="#">
        <div class="arrows-container">
            <div class="arrow arrow-one">
            </div>
            <div class="arrow arrow-two">
            </div>
        </div>
    </a>
</div>

<!-- JS here -->
<!-- Jquery, Popper, Bootstrap -->
<script src="<?= base_url() ?>/assets/assetsecom/js/vendor/modernizr-3.5.0.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/vendor/jquery-1.12.4.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/popper.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/bootstrap.min.js"></script>

<!-- Slick-slider , Owl-Carousel ,slick-nav -->
<script src="<?= base_url() ?>/assets/assetsecom/js/owl.carousel.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/slick.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/jquery.slicknav.min.js"></script>

<!--wow , counter , waypoint, Nice-select -->
<script src="<?= base_url() ?>/assets/assetsecom/js/wow.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/jquery.magnific-popup.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/jquery.nice-select.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/jquery.counterup.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/waypoints.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/price_rangs.js"></script>

<!-- contact js -->
<script src="<?= base_url() ?>/assets/assetsecom/js/contact.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/jquery.form.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/jquery.validate.min.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/mail-script.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/mixitup.js"></script>

<script src="<?= base_url() ?>/assets/assetsecom/js/jquery.ajaxchimp.min.js"></script>

<!--  Plugins, main-Jquery -->	
<script src="<?= base_url() ?>/assets/assetsecom/js/plugins.js"></script>
<script src="<?= base_url() ?>/assets/assetsecom/js/main.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />

      <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.js"></script>



<script>
    function get_selected_category(){
        var checked_array = [];
        $(".category_check:checked").each(function(){
            checked_array.push($(this).val());
        });
        return checked_array;
    }
    $(".search_bar").on("keyup", function() {
        get_product_list();
    });
    $('.category_check').click(function(e) {
        get_product_list();
    });

    function validate(total_selected){
        if (total_selected < <?= $total_min ?>)
        {
            Swal.fire({
                    title: "Option",
                    text: "Please select all the required option",
                    type: 'error'
            })
            return false;
        }
    }

    var selected_value = [];
    var selected_count = 0;

    $(".product_option_select").on('change', function(){
        var selected_value = get_selected_value().selected_value;
        var product_price = <?= $product['product_price'] ?>;
        var product_quantity = $('#product_quantity').val();
        var total_price =  ( product_price * product_quantity );
       

        item_price =  calculate_total(selected_value,total_price);
        $('#product_price').text((item_price));

    });
    function calculate_total(selected_value,item_price){
        var product_quantity = $('#product_quantity').val();

        selected_value.map(option => 
           item_price = parseFloat(item_price) + (parseFloat(option.selection_price) * parseFloat(product_quantity)) 
        )
        return item_price.toFixed(2)
    }
    $(".add_qty").on('click', function(){
        var product_quantity = parseFloat($('#product_quantity').val()) + 1;
        $('#product_quantity').val(product_quantity);
        calculate_product_price();
    });
    $(".minus_qty").on('click', function(){
        var product_quantity = parseFloat($('#product_quantity').val()) - 1;
        $('#product_quantity').val(product_quantity);
        calculate_product_price();
    });


    function calculate_product_price(){
       var total_selection_price = get_selected_value().selected_total_price;

       var product_price = <?= $product['product_price'] ?> + parseFloat(total_selection_price);
       var product_quantity = $('#product_quantity').val();
       var total_price =  ( product_price * product_quantity );
       $('#product_price').text(total_price.toFixed(2));
    }
    function get_selected_value(){
        selected_count = 0;
        selected_total_price = 0;
        selected_value = [];
        $(".product_option_select option:selected").each(function(){
            var option_selected = {
                selection_name : $(this).attr("selection_name"),
                selection_price : $(this).attr("selection_price"),
                product_option_name : $(this).attr("product_option_name"),
                product_option_id : $(this).attr("product_option_id"),
                product_option_selection_id : $(this).val(),
            }
            selected_value.push(option_selected);
            if(option_selected.product_option_id > 0){
                selected_total_price = parseFloat(option_selected.selection_price) + parseFloat(selected_total_price);
                selected_count = selected_count + 1;
                //count total selected value
            }
        });
        return {
            selected_value : selected_value,
            selected_total_price : selected_total_price,
            selected_count : selected_count,
        };

    }

    $(".add-to-cart-button").on('click', function(){
        var selected_count = get_selected_value().selected_count;
        var selected_value = get_selected_value().selected_value;
        var total_selection_price = get_selected_value().selected_total_price;

        var product_price = <?= $product['product_price'] ?> + parseFloat(total_selection_price);

        if(validate(selected_count) == false){
            return;
        }
        var postParam = {
            product_id : "<?= $product['product_id'] ?>",
            product_single_price : product_price,
            product_name : "<?=  $product['product_name'] ?>",
            quantity : $('#product_quantity').val(),
            product_price :  $('#product_price').text(),
            product_selection : selected_value
        }
        $.post("<?= base_url('main/add_to_cart') ?>", postParam, function(data){
            data = jQuery.parseJSON(data);
            if(data.status){
                alert('item added')
                // window.location.replace("<?= base_url('main/cart') ?>");
            } else {
                alert("ADD TO CART FAILED");
            }
        });
        // console.log(product)

    });

    function get_product_list(){

            let post_data = {
                'shop_id' : "<?= $shop['shop_id'] ?>"
            }
            var keyword = $('.search_bar').val();
            var checked_array = get_selected_category();
            if(checked_array != []){
                post_data.category_ids = checked_array;
            }
            if(keyword != ""){
                post_data.keyword = keyword;
            }
            $.ajax({
            url: "<?= base_url() ?>/main/product_list",
            method:"POST",
            data: post_data,
            success:function(data)
            {
                
                $('.product_list').html(data);
            }
            });
    }
    get_product_list();

    
            $('.property-controls a').on('click', function () {
            $('.property-controls a').removeClass('active');
            $(this).addClass('active');
        });


            
            if ($('.property-filter').length > 0) {
            var containerEl = document.querySelector('.property-filter');
            var mixer = mixitup(containerEl);
        }

    (function(){

        $('#close_promo_btn').click(function(e) {

            $('.header-bottom').hide();
        });

        $("a.fancybox").fancybox({
               'transitionIn'  :   'elastic',
        'transitionOut' :   'elastic',
        'speedIn'   :   600, 
        'speedOut'  :   200, 
        'overlayShow'   :   false,
        'cyclic'    :   true,
        'showNavArrows' :   true
            });

 $(document).click(function() {
    var $item = $(".shopping-cart");
    if ($item.hasClass("active")) {
      $item.removeClass("active");
    }
  });
  
  $('.shopping-cart').each(function() {
    var delay = $(this).index() * 50 + 'ms';
    $(this).css({
        '-webkit-transition-delay': delay,
        '-moz-transition-delay': delay,
        '-o-transition-delay': delay,
        'transition-delay': delay
    });
  });
  $('#cart').click(function(e) {
    e.stopPropagation();
    $(".shopping-cart").toggleClass("active");
  });
  
  $('#addtocart').click(function(e) {
    e.stopPropagation();
    $(".shopping-cart").toggleClass("active");
  });


  
})();
</script>
    <!-- <script src="locksmith/js/main.js"></script> -->
</body>
</html>